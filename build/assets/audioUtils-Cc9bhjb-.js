import{aC as p}from"./index-DDwOnqaL.js";const n=-60,D=6;function A(t){return isNaN(t)||!isFinite(t)||t<=0?-1/0:20*Math.log10(t)}function E(t){return!isFinite(t)||t<=n?0:Math.pow(10,t/20)}function S(t){if(t<=0)return-1/0;const o=t/100;return n+o*(D-n)}function x(t){return!isFinite(t)||t<=n?0:(t-n)/(D-n)*100}function y(t){if(isNaN(t)||!isFinite(t))return 1;const o=S(t);return E(o)}function P(t){if(isNaN(t)||!isFinite(t))return x(0);const o=A(t);return x(o)}function T(t){return!isFinite(t)||t<=n?"-âˆž":t>=0?`+${t.toFixed(1)}`:t.toFixed(1)}async function g(t,o){try{const{getAudioWorkerPool:c}=await p(async()=>{const{getAudioWorkerPool:l}=await import("./audioWorkerPool-BmJL61Ks.js");return{getAudioWorkerPool:l}},[]);return await c().processAudio(t,o)}catch{try{const e=await t.arrayBuffer(),m=await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(e),u=m.getChannelData(0),w=m.duration,h=o||Math.ceil(w*500),s=Math.max(1,Math.floor(u.length/h)),f=[];for(let r=0;r<h;r++){const i=s*r;let d=0;const M=s>500?10:1;for(let a=0;a<s&&i+a<u.length;a+=M){const _=Math.abs(u[i+a]);_>d&&(d=_)}f.push(d)}const F=f.reduce((r,i)=>Math.max(r,i),.001),v=f.map(r=>r/F);return{waveform:v,waveformOverview:v,duration:w}}catch(e){return console.error("Critical: Failed to generate waveform on main thread:",e),{waveform:[],waveformOverview:[],duration:0}}}}export{E as dbToGain,x as dbToSlider,T as formatDb,A as gainToDb,P as gainToSlider,g as generateWaveformFromFile,S as sliderToDb,y as sliderToGain};
