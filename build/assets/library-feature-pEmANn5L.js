import{r as n,j as e,R as we}from"./react-vendor-BoGJM_Cg.js";import{t as Ie,c as Me,a as ge}from"./utils-vendor-BznqKjY6.js";import{S as Ce,R as $e,a as Be,T as Ve,C as Oe,b as ke,c as Ee,D as Ue,P as Ge,O as He,d as Ke,e as Ze,f as qe,I as Qe,V as We,g as Ye,h as Xe,i as Je,j as ea,k as aa,l as ta,m as sa,n as ra,o as la,L as ia,p as na,q as oa,r as ca,s as da,t as ua,u as ma,v as xa,w as Se,x as Te,y as Ae}from"./ui-vendor-1btjq6i-.js";import{A as ha}from"./setlist-feature-BL2lBUsi.js";import{X as pa,C as ze,a as ga,b as fa,I as ja,P as te,T as fe,U as De,F as va,M as ee,S as ba,c as je,A as ve,d as be,G as Na,e as ya,L as wa,f as ce}from"./icons-vendor-4kQF2o2m.js";import{t as de}from"./toast-vendor-CHPPPCQ6.js";function i(...a){return Ie(Me(a))}const Ca=ge("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),h=n.forwardRef(({className:a,variant:t,size:l,asChild:o=!1,...m},v)=>{const N=o?Ce:"button";return e.jsx(N,{"data-slot":"button",className:i(Ca({variant:t,size:l,className:a})),ref:v,...m})});h.displayName="Button";function Ne({className:a,orientation:t="horizontal",decorative:l=!0,...o}){return e.jsx($e,{"data-slot":"separator-root",decorative:l,orientation:t,className:i("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...o})}function ka({...a}){return e.jsx(Be,{"data-slot":"dialog",...a})}function at({...a}){return e.jsx(Ve,{"data-slot":"dialog-trigger",...a})}function Sa({...a}){return e.jsx(Ge,{"data-slot":"dialog-portal",...a})}function tt({...a}){return e.jsx(ke,{"data-slot":"dialog-close",...a})}const _e=n.forwardRef(({className:a,...t},l)=>e.jsx(He,{ref:l,"data-slot":"dialog-overlay",className:i("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t}));_e.displayName="DialogOverlay";function Ta({className:a,children:t,...l}){return e.jsxs(Sa,{"data-slot":"dialog-portal",children:[e.jsx(_e,{}),e.jsxs(Oe,{"data-slot":"dialog-content",className:i("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...l,children:[t,e.jsxs(ke,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(pa,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Aa({className:a,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:i("flex flex-col gap-2 text-center sm:text-left",a),...t})}function st({className:a,...t}){return e.jsx("div",{"data-slot":"dialog-footer",className:i("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})}function za({className:a,...t}){return e.jsx(Ee,{"data-slot":"dialog-title",className:i("text-lg leading-none font-semibold",a),...t})}function Da({className:a,...t}){return e.jsx(Ue,{"data-slot":"dialog-description",className:i("text-muted-foreground text-sm",a),...t})}const _a=ge("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function w({className:a,variant:t,asChild:l=!1,...o}){const m=l?Ce:"span";return e.jsx(m,{"data-slot":"badge",className:i(_a({variant:t}),a),...o})}function b({className:a,type:t,...l}){return e.jsx("input",{type:t,"data-slot":"input",className:i("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...l})}function C({className:a,...t}){return e.jsx(Ke,{"data-slot":"label",className:i("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}function ue({className:a,...t}){return e.jsx("div",{"data-slot":"card",className:i("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...t})}function rt({className:a,...t}){return e.jsx("div",{"data-slot":"card-header",className:i("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function lt({className:a,...t}){return e.jsx("h4",{"data-slot":"card-title",className:i("leading-none",a),...t})}function it({className:a,...t}){return e.jsx("p",{"data-slot":"card-description",className:i("text-muted-foreground",a),...t})}function me({className:a,...t}){return e.jsx("div",{"data-slot":"card-content",className:i("px-6 [&:last-child]:pb-6",a),...t})}function nt({className:a,...t}){return e.jsx("div",{"data-slot":"card-footer",className:i("flex items-center px-6 pb-6 [.border-t]:pt-6",a),...t})}function M({...a}){return e.jsx(Ze,{"data-slot":"select",...a})}function $({...a}){return e.jsx(We,{"data-slot":"select-value",...a})}function B({className:a,size:t="default",children:l,...o}){return e.jsxs(qe,{"data-slot":"select-trigger","data-size":t,className:i("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...o,children:[l,e.jsx(Qe,{asChild:!0,children:e.jsx(ze,{className:"size-4 opacity-50"})})]})}function V({className:a,children:t,position:l="popper",...o}){return e.jsx(Ye,{children:e.jsxs(Xe,{"data-slot":"select-content",className:i("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",l==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:[e.jsx(Ra,{}),e.jsx(Je,{className:i("p-1",l==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(Pa,{})]})})}function p({className:a,children:t,...l}){return e.jsxs(ea,{"data-slot":"select-item",className:i("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...l,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(aa,{children:e.jsx(ga,{className:"size-4"})})}),e.jsx(ta,{children:t})]})}function Ra({className:a,...t}){return e.jsx(sa,{"data-slot":"select-scroll-up-button",className:i("flex cursor-default items-center justify-center py-1",a),...t,children:e.jsx(fa,{className:"size-4"})})}function Pa({className:a,...t}){return e.jsx(ra,{"data-slot":"select-scroll-down-button",className:i("flex cursor-default items-center justify-center py-1",a),...t,children:e.jsx(ze,{className:"size-4"})})}const xe=n.forwardRef(({className:a,...t},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:i("w-full caption-bottom text-sm",a),...t})}));xe.displayName="Table";const he=n.forwardRef(({className:a,...t},l)=>e.jsx("thead",{ref:l,className:i("[&_tr]:border-b",a),...t}));he.displayName="TableHeader";const pe=n.forwardRef(({className:a,...t},l)=>e.jsx("tbody",{ref:l,className:i("[&_tr:last-child]:border-0",a),...t}));pe.displayName="TableBody";const La=n.forwardRef(({className:a,...t},l)=>e.jsx("tfoot",{ref:l,className:i("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t}));La.displayName="TableFooter";const H=n.forwardRef(({className:a,...t},l)=>e.jsx("tr",{ref:l,className:i("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t}));H.displayName="TableRow";const S=n.forwardRef(({className:a,...t},l)=>e.jsx("th",{ref:l,className:i("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t}));S.displayName="TableHead";const T=n.forwardRef(({className:a,...t},l)=>e.jsx("td",{ref:l,className:i("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t}));T.displayName="TableCell";const Fa=n.forwardRef(({className:a,...t},l)=>e.jsx("caption",{ref:l,className:i("mt-4 text-sm text-muted-foreground",a),...t}));Fa.displayName="TableCaption";const Ia={drums:["drums"],percussion:["percussion","cajon"],bass:["bass"],guitar:["acoustic-guitar","electric-guitar"],keys:["keys","keyboard-piano"],vocals:["vocals-general","lead-vocal","backing-vocals"],orchestral:[],loops:[],click:[],guide:[],piano:[],other:["other-elements"]},Ma=["C","D","E","F","G","A","B"],$a=[{value:"natural",label:"♮"},{value:"sharp",label:"♯"},{value:"flat",label:"♭"}],Ba=["Major","Minor","Ionian","Dorian","Phrygian","Lydian","Mixolydian","Aeolian","Locrian"],Va={"acoustic-guitar":"Acoustic Guitar",bass:"Bass","electric-guitar":"Electric Guitar","keyboard-piano":"Keyboard/Piano",keys:"Keys",percussion:"Percussion",cajon:"Cajón",drums:"Drums","vocals-general":"Vocals (General)","lead-vocal":"Lead Vocal","backing-vocals":"Backing Vocals","other-elements":"Other Elements"};function Oa({open:a,onOpenChange:t,onCreateProject:l}){const[o,m]=n.useState([]),[v,N]=n.useState(!1),[O,K]=n.useState(""),[E,g]=n.useState(""),[k,L]=n.useState([]),[A,U]=n.useState(null),[z,Z]=n.useState(""),D=n.useRef(null),[f,q]=n.useState("C"),[_,Q]=n.useState("natural"),[R,W]=n.useState("Major"),[P,Y]=n.useState("120"),[X,J]=n.useState("4"),[G,F]=n.useState("4"),se=r=>{if(r.target.files&&r.target.files.length>0){const u=Array.from(r.target.files).map(d=>({file:d,channelName:d.name.replace(/\.[^/.]+$/,"")}));m([...o,...u])}},re=(r,u)=>{const d=[...o];d[r].channelName=u,m(d)},le=(r,u)=>{const d=[...o];d[r].tag=u,m(d)},ie=r=>{m(o.filter((u,d)=>d!==r))},ne=r=>{if(r.target.files&&r.target.files[0]){const u=r.target.files[0];U(u);const d=new FileReader;d.onloadend=()=>{Z(d.result)},d.readAsDataURL(u)}},s=()=>{L([...k,{id:`author-${Date.now()}`,name:"",role:"Composer"}])},c=r=>{L(k.filter(u=>u.id!==r))},x=(r,u,d)=>{L(k.map(y=>y.id===r?{...y,[u]:d}:y))},I=async()=>{if(o.length===0){de.error("Please add at least one audio file");return}if(!O.trim()){de.error("Please enter a song name");return}if(o.filter(j=>!j.tag).length>0){de.error("Please assign a tag to all tracks");return}const d=`${f}${_==="sharp"?"♯":_==="flat"?"♭":""} ${R}`,y={songName:O.trim(),artist:E.trim()||"Unknown Artist",authors:k,coverArt:A,coverArtPreview:z,key:d,tempo:parseInt(P)||120,timeSignature:`${X}/${G}`,tracks:o.map((j,Fe)=>({id:`track-${Fe}`,file:j.file,fileName:j.file.name,channelName:j.channelName,tag:j.tag}))};N(!0);try{await l(y),oe(),t(!1)}catch(j){console.error("Failed to create project:",j)}finally{N(!1)}},oe=()=>{m([]),K(""),g(""),L([]),U(null),Z(""),q("C"),Q("natural"),W("Major"),Y("120"),J("4"),F("4")};return e.jsx(ka,{open:a,onOpenChange:t,children:e.jsxs(Ta,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Aa,{children:[e.jsx(za,{children:"Create New Project"}),e.jsx(Da,{children:"Set up your multitrack project with audio files and initial parameters"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{children:"Song Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"song-name",children:"Song Name *"}),e.jsx(b,{id:"song-name",value:O,onChange:r=>K(r.target.value),placeholder:"Enter song name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"artist",children:"Artist"}),e.jsx(b,{id:"artist",value:E,onChange:r=>g(r.target.value),placeholder:"Enter artist name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Cover Art"}),e.jsxs("div",{className:"flex gap-4",children:[z&&e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:z,alt:"Cover",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(b,{ref:D,type:"file",accept:"image/*",onChange:ne,className:"hidden"}),e.jsxs(h,{variant:"outline",onClick:()=>D.current?.click(),className:"w-full",children:[e.jsx(ja,{className:"w-4 h-4 mr-2"}),A?"Change Cover Art":"Upload Cover Art"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"Authors"}),e.jsxs(h,{variant:"outline",size:"sm",onClick:s,children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Add Author"]})]}),k.length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(H,{children:[e.jsx(S,{children:"Author Name"}),e.jsx(S,{children:"Role"}),e.jsx(S,{className:"w-[50px]"})]})}),e.jsx(pe,{children:k.map(r=>e.jsxs(H,{children:[e.jsx(T,{children:e.jsx(b,{value:r.name,onChange:u=>x(r.id,"name",u.target.value),placeholder:"Author name"})}),e.jsx(T,{children:e.jsxs(M,{value:r.role,onValueChange:u=>x(r.id,"role",u),children:[e.jsx(B,{children:e.jsx($,{})}),e.jsxs(V,{children:[e.jsx(p,{value:"Composer",children:"Composer"}),e.jsx(p,{value:"Lyricist",children:"Lyricist"}),e.jsx(p,{value:"Music",children:"Music"}),e.jsx(p,{value:"Lyric Translation",children:"Lyric Translation"})]})]})}),e.jsx(T,{children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>c(r.id),children:e.jsx(fe,{className:"w-4 h-4"})})})]},r.id))})]})})]})]}),e.jsx(Ne,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{children:"Audio Tracks"}),e.jsx(ue,{className:"border-2 border-dashed",children:e.jsx(me,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(De,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1",children:"Add Audio Files"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select individual tracks (stems) or multiple audio files"}),e.jsx(b,{id:"file-upload",type:"file",multiple:!0,accept:"audio/*",onChange:se,className:"hidden"}),e.jsx(h,{asChild:!0,variant:"outline",children:e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Browse Files"]})})]})]})})}),o.length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(H,{children:[e.jsx(S,{className:"w-[150px]",children:"File Name"}),e.jsx(S,{children:"Channel Name"}),e.jsx(S,{className:"w-[180px]",children:"Tag *"}),e.jsx(S,{className:"w-[50px]"})]})}),e.jsx(pe,{children:o.map((r,u)=>e.jsxs(H,{children:[e.jsx(T,{className:"text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate max-w-[120px]",title:r.file.name,children:r.file.name})]})}),e.jsx(T,{children:e.jsx(b,{value:r.channelName,onChange:d=>re(u,d.target.value),placeholder:"Channel name"})}),e.jsx(T,{children:e.jsxs(M,{value:r.tag||"",onValueChange:d=>le(u,d),children:[e.jsx(B,{className:r.tag?"":"border-red-500",children:e.jsx($,{placeholder:"Select tag"})}),e.jsx(V,{children:Object.entries(Ia).filter(([d,y])=>y.length>0&&!["click","guide","other","orchestral","loops","piano"].includes(d)).map(([d,y])=>e.jsxs(we.Fragment,{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 capitalize mt-2",children:d.replace("-"," ")}),y.map(j=>e.jsx(p,{value:j,children:Va[j]},j))]},d))})]})}),e.jsx(T,{children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>ie(u),children:e.jsx(fe,{className:"w-4 h-4"})})})]},u))})]})})]}),e.jsx(Ne,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{children:"Project Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Key Signature"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(M,{value:f,onValueChange:q,children:[e.jsx(B,{children:e.jsx($,{})}),e.jsx(V,{children:Ma.map(r=>e.jsx(p,{value:r,children:r},r))})]}),e.jsxs(M,{value:_,onValueChange:Q,children:[e.jsx(B,{children:e.jsx($,{})}),e.jsx(V,{children:$a.map(r=>e.jsx(p,{value:r.value,children:r.label},r.value))})]}),e.jsxs(M,{value:R,onValueChange:W,children:[e.jsx(B,{children:e.jsx($,{})}),e.jsx(V,{children:Ba.map(r=>e.jsx(p,{value:r,children:r},r))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"tempo",children:"Tempo (BPM)"}),e.jsx(b,{id:"tempo",type:"number",placeholder:"120",value:P,onChange:r=>Y(r.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Time Signature"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"ts-numerator",className:"text-xs text-gray-600",children:"Numerator"}),e.jsx(b,{id:"ts-numerator",type:"number",placeholder:"4",value:X,onChange:r=>J(r.target.value)})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"ts-denominator",className:"text-xs text-gray-600",children:"Denominator"}),e.jsx(b,{id:"ts-denominator",type:"number",placeholder:"4",value:G,onChange:r=>F(r.target.value)})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(h,{variant:"outline",onClick:()=>t(!1),disabled:v,children:"Cancel"}),e.jsxs(h,{onClick:I,disabled:v,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),v?"Processing audio...":"Create Project"]})]})]})})}function Ea({className:a,...t}){return e.jsx(la,{"data-slot":"tabs",className:i("flex flex-col gap-2",a),...t})}function Ua({className:a,...t}){return e.jsx(ia,{"data-slot":"tabs-list",className:i("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",a),...t})}function ye({className:a,...t}){return e.jsx(na,{"data-slot":"tabs-trigger",className:i("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function Ga({className:a,...t}){return e.jsx(oa,{"data-slot":"tabs-content",className:i("flex-1 outline-none",a),...t})}function Ha({className:a,children:t,...l}){return e.jsxs(ca,{"data-slot":"scroll-area",className:i("relative",a),...l,children:[e.jsx(da,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),e.jsx(Ka,{}),e.jsx(ua,{})]})}function Ka({className:a,orientation:t="vertical",...l}){return e.jsx(ma,{"data-slot":"scroll-area-scrollbar",orientation:t,className:i("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",a),...l,children:e.jsx(xa,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const Re=ge("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Za=n.forwardRef(({className:a,variant:t,size:l,...o},m)=>e.jsx(Se,{ref:m,className:i(Re({variant:t,size:l,className:a})),...o}));Za.displayName=Se.displayName;const Pe=n.createContext({size:"default",variant:"default"}),Le=n.forwardRef(({className:a,variant:t,size:l,children:o,...m},v)=>e.jsx(Te,{ref:v,className:i("flex items-center justify-center gap-1",a),...m,children:e.jsx(Pe.Provider,{value:{variant:t,size:l},children:o})}));Le.displayName=Te.displayName;const ae=n.forwardRef(({className:a,children:t,variant:l,size:o,...m},v)=>{const N=n.useContext(Pe);return e.jsx(Ae,{ref:v,className:i(Re({variant:N.variant||l,size:N.size||o}),a),...m,children:t})});ae.displayName=Ae.displayName;function qa({songs:a,setlists:t,onSongSelect:l,selectedSongId:o,onAddToSetlist:m,onCreateSetlist:v,onImportSetlist:N,onImportSong:O,onCreateProject:K,onImportProject:E}){const[g,k]=n.useState(""),[L,A]=n.useState(!1),[U,z]=n.useState(null),[Z,D]=n.useState(!1),[f,q]=n.useState("imported"),[_,Q]=n.useState("date_desc"),[R,W]=n.useState("grid-image"),P=we.useRef(null),Y=s=>{const c=s.target.files?.[0];c&&E&&(E(c),P.current&&(P.current.value=""))},{totalImportedCount:X,totalProjectsCount:J}=n.useMemo(()=>{let s=0,c=0;return a.forEach(x=>{(x.title.toLowerCase().includes(g.toLowerCase())||x.artist.toLowerCase().includes(g.toLowerCase()))&&(x.source==="project"?c++:s++)}),{totalImportedCount:s,totalProjectsCount:c}},[a,g]),G=n.useMemo(()=>a.filter(c=>{const x=f==="imported"?c.source!=="project":c.source==="project",I=c.title.toLowerCase().includes(g.toLowerCase())||c.artist.toLowerCase().includes(g.toLowerCase());return x&&I}).sort((c,x)=>{switch(_){case"title_asc":return c.title.localeCompare(x.title);case"title_desc":return x.title.localeCompare(c.title);case"artist_asc":return c.artist.localeCompare(x.artist);case"artist_desc":return x.artist.localeCompare(c.artist);case"date_asc":const I=c.lastModified||new Date(0),oe=x.lastModified||new Date(0);return I.getTime()-oe.getTime();case"date_desc":default:const r=c.lastModified||new Date(0);return(x.lastModified||new Date(0)).getTime()-r.getTime()}}),[a,g,_,f]),F=s=>{const c=Math.floor(s/60),x=String(s%60).padStart(2,"0");return`${c}:${x}`},se=s=>e.jsxs(ue,{className:i("cursor-pointer transition-all hover:shadow-md overflow-hidden",o===s.id?"ring-2 ring-blue-500":""),onClick:()=>l(s),children:[s.thumbnailUrl?e.jsx("div",{className:"aspect-video w-full bg-gray-200",children:e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"aspect-video w-full bg-gray-100 flex items-center justify-center text-gray-400",children:e.jsx(ee,{className:"w-12 h-12"})}),e.jsxs(me,{className:"p-4 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"truncate font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.artist})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 flex-wrap",children:[e.jsx(w,{variant:"outline",children:s.key}),e.jsxs(w,{variant:"outline",children:[s.tempo," BPM"]}),e.jsx(w,{variant:"outline",children:F(s.duration)})]}),e.jsxs(h,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:c=>{c.stopPropagation(),z(s),A(!0)},children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Add to Setlist"]})]})]},s.id),re=s=>e.jsx(ue,{className:i("cursor-pointer transition-all hover:shadow-md",o===s.id?"ring-2 ring-blue-500":""),onClick:()=>l(s),children:e.jsxs(me,{className:"p-3 space-y-1.5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"truncate font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.artist})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 flex-wrap",children:[e.jsx(w,{variant:"secondary",className:"px-1.5 py-0.5 text-[10px]",children:s.key}),e.jsxs(w,{variant:"secondary",className:"px-1.5 py-0.5 text-[10px]",children:[s.tempo," BPM"]}),e.jsx(w,{variant:"secondary",className:"px-1.5 py-0.5 text-[10px]",children:F(s.duration)})]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"w-full mt-2 h-7 text-xs",onClick:c=>{c.stopPropagation(),z(s),A(!0)},children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"Add to Setlist"]})]})},s.id),le=s=>e.jsxs("div",{className:i("flex items-center gap-4 p-3 border-b cursor-pointer hover:bg-gray-100 transition-colors",o===s.id?"bg-blue-50":""),onClick:()=>l(s),children:[e.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 flex items-center justify-center flex-shrink-0",children:s.thumbnailUrl?e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-full h-full object-cover rounded"}):e.jsx(ee,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"truncate font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.artist})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3 text-sm text-gray-600 w-48 flex-shrink-0 justify-end",children:[e.jsx(w,{variant:"outline",className:"w-16 justify-center truncate",children:s.key}),e.jsxs("span",{className:"w-16 text-right truncate",children:[s.tempo," BPM"]}),e.jsx("span",{className:"w-12 text-right",children:F(s.duration)})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:c=>{c.stopPropagation(),z(s),A(!0)},"aria-label":`Add ${s.title} to setlist`,children:e.jsx(ce,{className:"w-4 h-4"})})})]},s.id),ie=()=>{switch(R){case"grid-compact":return"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3";case"list":return"flex flex-col border rounded-md overflow-hidden";case"grid-image":default:return"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"}},ne=R==="list"?le:R==="grid-compact"?re:se;return e.jsxs("div",{className:"space-y-4 flex flex-col h-full overflow-hidden",children:[e.jsx("input",{ref:P,type:"file",accept:".gmtk,.gmtkmock",onChange:Y,className:"hidden"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-grow sm:flex-grow-0",children:[e.jsxs("div",{className:"relative flex-grow sm:flex-grow-0 sm:w-64",children:[e.jsx(ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"}),e.jsx(b,{placeholder:"Search songs...",value:g,onChange:s=>k(s.target.value),className:"pl-9"})]}),e.jsxs(h,{onClick:()=>D(!0),size:"sm",className:"hidden sm:inline-flex",children:[e.jsx(te,{className:"w-4 h-4 mr-1"})," Create"]}),e.jsxs(h,{variant:"outline",onClick:()=>P.current?.click(),size:"sm",className:"hidden sm:inline-flex",children:[e.jsx(De,{className:"w-4 h-4 mr-1"})," Import Project"]}),e.jsx(h,{onClick:()=>D(!0),size:"icon",className:"sm:hidden",children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{value:_,onValueChange:s=>Q(s),children:[e.jsx(B,{className:"w-[180px] h-9 text-xs sm:text-sm",children:e.jsx($,{placeholder:"Sort by..."})}),e.jsxs(V,{children:[e.jsxs(p,{value:"date_desc",children:[e.jsx(je,{className:"w-4 h-4 mr-2 inline"}),"Date Added (Newest)"]}),e.jsxs(p,{value:"date_asc",children:[e.jsx(je,{className:"w-4 h-4 mr-2 inline"}),"Date Added (Oldest)"]}),e.jsxs(p,{value:"title_asc",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 inline"}),"Title (A-Z)"]}),e.jsxs(p,{value:"title_desc",children:[e.jsx(be,{className:"w-4 h-4 mr-2 inline"}),"Title (Z-A)"]}),e.jsxs(p,{value:"artist_asc",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 inline"}),"Artist (A-Z)"]}),e.jsxs(p,{value:"artist_desc",children:[e.jsx(be,{className:"w-4 h-4 mr-2 inline"}),"Artist (Z-A)"]})]})]}),e.jsxs(Le,{type:"single",value:R,onValueChange:s=>{s&&W(s)},className:"h-9",children:[e.jsx(ae,{value:"grid-image",className:"px-2",children:e.jsx(Na,{className:"w-4 h-4"})}),e.jsx(ae,{value:"grid-compact",className:"px-2",children:e.jsx(ya,{className:"w-4 h-4"})}),e.jsx(ae,{value:"list",className:"px-2",children:e.jsx(wa,{className:"w-4 h-4"})})]})]})]}),e.jsxs(Ea,{value:f,onValueChange:s=>q(s),className:"w-full flex flex-col flex-1 overflow-hidden",children:[e.jsxs(Ua,{className:"w-full justify-start flex-shrink-0",children:[e.jsxs(ye,{value:"imported",className:"flex items-center gap-1.5",children:["Imported",e.jsx(w,{variant:f==="imported"?"default":"secondary",className:"ml-1 px-1.5 text-[10px]",children:X})]}),e.jsxs(ye,{value:"projects",className:"flex items-center gap-1.5",children:["Projects",e.jsx(w,{variant:f==="projects"?"default":"secondary",className:"ml-1 px-1.5 text-[10px]",children:J})]})]}),e.jsx(Ga,{value:f,className:"mt-4 flex-1 overflow-hidden",children:e.jsxs(Ha,{className:"h-full pr-3",children:[" ",G.length>0?e.jsx("div",{className:ie(),children:G.map(ne)}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["No ",f==="projects"?"projects":"imported songs"," found ",g?"matching your search":""]}),!g&&f==="imported"&&e.jsx(h,{variant:"link",onClick:O,className:"mt-2",children:"Import your first song"}),!g&&f==="projects"&&e.jsx(h,{variant:"link",onClick:()=>D(!0),className:"mt-2",children:"Create your first project"})]})]})})]}),U&&e.jsx(ha,{open:L,onOpenChange:A,song:U,setlists:t,songs:a,onAddToSetlist:m,onCreateSetlist:v,onImportSetlist:N}),e.jsx(Oa,{open:Z,onOpenChange:D,onCreateProject:async s=>K(s)})]})}const ot=Object.freeze(Object.defineProperty({__proto__:null,SongLibrary:qa},Symbol.toStringTag,{value:"Module"}));export{w as B,ue as C,ka as D,b as I,C as L,Ne as S,Ea as T,Ta as a,Aa as b,za as c,Da as d,i as e,h as f,M as g,B as h,$ as i,V as j,p as k,Ua as l,ye as m,Ga as n,at as o,st as p,tt as q,me as r,rt as s,Oa as t,Ha as u,lt as v,it as w,Ia as x,nt as y,ot as z};
